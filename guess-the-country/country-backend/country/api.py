import datetime
import os
import random
import urllib.error
from urllib.request import urlretrieve

import cv2
import requests
from .explainer.explain import explain_cnn
from fastapi import APIRouter
from .model.predict import load_model, predict_image, prepare
from shapely.geometry import Point, Polygon
from .config import settings

api = APIRouter()


def generate_random(polygon):
    points = []
    minx, miny, maxx, maxy = polygon.bounds
    while len(points) < 1:
        pnt = Point(random.uniform(minx, maxx), random.uniform(miny, maxy))
        if polygon.contains(pnt):
            points.append(pnt)
    return list(points[0].coords)


# Google Street View Image API
# 25,000 image requests per 24 hours
# See https://developers.google.com/maps/documentation/streetview/
API_KEY = settings.google_maps_api_token
GOOGLE_URL = (
        "http://maps.googleapis.com/maps/api/streetview?sensor=false&"
        "size=640x640&source=outdoor&key=" + API_KEY
)

API_URL = "https://maps.googleapis.com/maps/api/streetview/metadata"  # Not billed

IMG_PREFIX = "img_"
IMG_SUFFIX = ".png"


# Predict Image
@api.post("/predict/image3/")
async def predict_api(url):
    url = url.replace('.', "../vue-webapp/public", 1)
    print(url)
    model = load_model()
    prediction = predict_image(prepare(url), model)
    return {prediction}


# Explain Prediction
@api.post("/predict/explain2/")
async def explain_api(url):
    url2 = url.replace('.', "../vue-webapp/public", 1)
    model = load_model()
    image = prepare(url2)
    model = load_model()
    os.remove(url2)
    explanation = explain_cnn(image, model)
    image = explanation.astype('float32') * 224
    image = cv2.resize(image, (640, 640))
    image = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)
    date = str(datetime.datetime.now())
    cv2.imwrite("../vue-webapp/public/Image/Explain/proof-" + date + ".png", image)
    return "./Image/Explain/proof-" + date + ".png"


# #dieser Teil war nur zum Testen, wenn man Fotos als response Streamen möchte
# @app.post("/predict/explain")
# async def explain_api(file: UploadFile = File(...)):
#     extension = file.filename.split(".")[-1] in ("jpg", "jpeg", "png")
#     if not extension:
#         return "Image must be jpg or png format!"
#     image = read_imagefile2(await file.read())
#     image = preprocess2(image)
#     model = load_model()
#     res, im_png = cv2.imencode(".png", image[0])
#     return StreamingResponse(io.BytesIO(im_png), media_type="image/png")

# #dieser Teil war nur zum Testen, wenn man Fotos hochladen möchte
# @app.post("/predict/image")
# async def predict_api(file: UploadFile = File(...)):
#     extension = file.filename.split(".")[-1] in ("jpg", "jpeg", "png")
#     if not extension:
#         return "Image must be jpg or png format!"
#     image = read_imagefile(await file.read())
#     image = preprocess(image)
#     model = load_model()
#     prediction = predict_image(image, model)
#     return {prediction}

@api.get("/msg")
def home():
    return "Was this Google Streetview photo taken in Tel-Aviv or Berlin? Challenge yourself with an AI."


@api.get("/streetview")
def streetview():
    tel_aviv = {
        "country": "Israel",
        "city": "Tel-Aviv",
        "polygon": [(34.739131, 32.0337564), (34.7422018, 32.0329711), (34.7423195, 32.033133),
                    (34.7424309, 32.0331262), (34.7430682, 32.0330872), (34.7433235, 32.0330003),
                    (34.7433495, 32.0330387), (34.7434054, 32.0330171), (34.7439781, 32.0327579),
                    (34.7439347, 32.0327208), (34.7441624, 32.0325724), (34.7441252, 32.0325597),
                    (34.7457522, 32.0316682), (34.7498687, 32.0293437), (34.7508466, 32.0305994),
                    (34.7519117, 32.0305432), (34.7525573, 32.0304308), (34.7526338, 32.0306149),
                    (34.7527868, 32.0306235), (34.7528557, 32.0310052), (34.7545649, 32.0307511),
                    (34.7546111, 32.0309709), (34.7546464, 32.0309666), (34.7546974, 32.0312306),
                    (34.755268, 32.0311522), (34.7553373, 32.031346), (34.755535, 32.0321908), (34.7554573, 32.0322024),
                    (34.7555189, 32.0325044), (34.7557272, 32.0324728), (34.7559207, 32.0334594),
                    (34.7559292, 32.0335029), (34.7594835, 32.0329286), (34.7594073, 32.033702),
                    (34.7594103, 32.034426), (34.7594501, 32.0348412), (34.7595812, 32.0355455),
                    (34.7597797, 32.0361003), (34.7599523, 32.036474), (34.7609226, 32.0364774),
                    (34.7616566, 32.0365736), (34.7627534, 32.0366045), (34.7637201, 32.0365475),
                    (34.7648102, 32.0363907), (34.7655055, 32.0362449), (34.7661164, 32.0360102),
                    (34.7693952, 32.0348599), (34.7702416, 32.0344503), (34.7708632, 32.0342258),
                    (34.7716066, 32.0338981), (34.7726831, 32.0334717), (34.7726921, 32.0334869),
                    (34.7743862, 32.0327793), (34.7766735, 32.0366922), (34.778101, 32.0386707),
                    (34.7788194, 32.0382728), (34.7789424, 32.0383977), (34.7806878, 32.0404482),
                    (34.7860013, 32.0468247), (34.7880801, 32.0467585), (34.788266, 32.0462139),
                    (34.7893175, 32.0440806), (34.7893738, 32.0441019), (34.7896112, 32.0435302),
                    (34.7905549, 32.041484), (34.7917614, 32.0408878), (34.7942195, 32.0402664),
                    (34.7954583, 32.0400678), (34.7968048, 32.0397277), (34.7980261, 32.0392118),
                    (34.7988374, 32.0387686), (34.8006752, 32.0376804), (34.8015691, 32.037099), (34.802537, 32.036619),
                    (34.8037814, 32.036054), (34.8054746, 32.0353502), (34.8072519, 32.0345527),
                    (34.8080262, 32.0367907), (34.8076433, 32.0369006), (34.807918, 32.0376697),
                    (34.8082863, 32.0375057), (34.8084364, 32.0381126), (34.8089343, 32.0392335),
                    (34.8097489, 32.0415382), (34.8121926, 32.0408139), (34.8123315, 32.0408265),
                    (34.812423, 32.0409164), (34.8138129, 32.0446013), (34.8132415, 32.0446939),
                    (34.8137764, 32.0467277), (34.8138145, 32.0469971), (34.813906, 32.0476435),
                    (34.8139279, 32.048543), (34.8138801, 32.0503151), (34.8138417, 32.0506746),
                    (34.8136676, 32.0512112), (34.8133778, 32.0517542), (34.8130027, 32.0523516),
                    (34.8125487, 32.0529485), (34.8121486, 32.053412), (34.8117758, 32.0537654),
                    (34.8115162, 32.0540116), (34.8110639, 32.0543902), (34.8104268, 32.0548598),
                    (34.8110273, 32.055961), (34.8112814, 32.0565693), (34.8116451, 32.0578768),
                    (34.8117959, 32.0586318), (34.8105739, 32.0588432), (34.8107133, 32.0597083),
                    (34.8094387, 32.0599935), (34.8086379, 32.0602384), (34.8080559, 32.0604513),
                    (34.8076154, 32.0606534), (34.8070291, 32.060979), (34.8066949, 32.0611944),
                    (34.8061407, 32.0616267), (34.8055958, 32.0621655), (34.8058771, 32.0623597),
                    (34.8057569, 32.0629088), (34.8054755, 32.0632828), (34.8052249, 32.0636844),
                    (34.8049405, 32.0642392), (34.8047126, 32.0648157), (34.8045815, 32.0652271),
                    (34.8044923, 32.0656284), (34.8038597, 32.065577), (34.8037845, 32.0661294),
                    (34.8028101, 32.0660468), (34.802506, 32.0691447), (34.8024177, 32.0695835),
                    (34.8023099, 32.0697888), (34.8021218, 32.0699782), (34.802566, 32.0704561),
                    (34.8023866, 32.0706084), (34.8022498, 32.0707762), (34.8009232, 32.0725349),
                    (34.800599, 32.0729257), (34.8021281, 32.0767609), (34.8021236, 32.0771463),
                    (34.8019335, 32.0777139), (34.8016683, 32.0779354), (34.8013171, 32.0781629),
                    (34.799323, 32.0792031), (34.7988821, 32.0794049), (34.7987341, 32.0795438),
                    (34.7978591, 32.0802108), (34.7981179, 32.0807967), (34.798485, 32.0808437),
                    (34.7986342, 32.0809656), (34.7990386, 32.0811144), (34.7993188, 32.08116),
                    (34.7997927, 32.0811735), (34.7998964, 32.0811793), (34.8000201, 32.0811905),
                    (34.8000483, 32.0816511), (34.8000005, 32.0819082), (34.7998664, 32.082227),
                    (34.7995713, 32.0827641), (34.7994277, 32.0832128), (34.7994041, 32.0835459),
                    (34.7994462, 32.0837499), (34.7995258, 32.0839278), (34.7993912, 32.0840223),
                    (34.7991223, 32.0843933), (34.7992975, 32.0848706), (34.8001094, 32.0866451),
                    (34.800569, 32.0877273), (34.8011405, 32.0893632), (34.8011792, 32.0895098),
                    (34.801217, 32.0897737), (34.8013086, 32.0901515), (34.8017854, 32.0929295),
                    (34.8021018, 32.0933204), (34.8022135, 32.0934054), (34.8028246, 32.0927597),
                    (34.8031273, 32.0922878), (34.8034556, 32.0916111), (34.8038951, 32.0911981),
                    (34.8042194, 32.0910073), (34.8044838, 32.0909248), (34.8048029, 32.0911114),
                    (34.8049955, 32.0911382), (34.8050141, 32.0910803), (34.8053706, 32.0911818),
                    (34.8053374, 32.091273), (34.8058862, 32.0914028), (34.8058935, 32.0912055),
                    (34.806456, 32.0912288), (34.8070539, 32.0911658), (34.8068813, 32.0899076),
                    (34.8068822, 32.0898141), (34.8069582, 32.0897763), (34.8086708, 32.0907686),
                    (34.8089931, 32.0909122), (34.8093237, 32.0909767), (34.8087775, 32.0933347),
                    (34.8087024, 32.0935594), (34.8086749, 32.0939835), (34.8085686, 32.0942757),
                    (34.8085608, 32.0943945), (34.808662, 32.0943992), (34.8087026, 32.0941008),
                    (34.8087785, 32.0943486), (34.8091299, 32.0947844), (34.8094084, 32.0949697),
                    (34.8097403, 32.0950932), (34.8097055, 32.0963193), (34.810086, 32.0963044),
                    (34.8104865, 32.0962473), (34.8110735, 32.0960829), (34.8115477, 32.0959215),
                    (34.8119004, 32.0957591), (34.8122325, 32.0956659), (34.8124035, 32.0956553),
                    (34.8128844, 32.0957435), (34.8135271, 32.0959648), (34.8137942, 32.0960919),
                    (34.8142583, 32.0963706), (34.8144566, 32.0965319), (34.8148322, 32.096958),
                    (34.8152043, 32.0974585), (34.8153969, 32.097999), (34.8155343, 32.0981483),
                    (34.8156194, 32.0981767), (34.8160326, 32.0981603), (34.8169785, 32.0980122),
                    (34.8174285, 32.0978877), (34.8182152, 32.097794), (34.8185537, 32.0975767),
                    (34.8186435, 32.0974742), (34.8188486, 32.0969679), (34.8188463, 32.0964914),
                    (34.8189042, 32.0963474), (34.8189924, 32.0962497), (34.8191824, 32.0961513),
                    (34.8193251, 32.0961108), (34.8194539, 32.0961119), (34.8196675, 32.0961641),
                    (34.8199795, 32.0962867), (34.8203379, 32.0965979), (34.8214132, 32.0977876),
                    (34.8216428, 32.0981662), (34.8219293, 32.098512), (34.8224614, 32.0988262),
                    (34.8225662, 32.0989676), (34.8226213, 32.0991476), (34.8225803, 32.0994933),
                    (34.8223843, 32.0998159), (34.8221124, 32.1000977), (34.8214612, 32.1005446),
                    (34.8213141, 32.1007072), (34.821146, 32.1009504), (34.8211678, 32.1011976),
                    (34.8213526, 32.1014203), (34.8215995, 32.1015941), (34.8221085, 32.1018121),
                    (34.8225309, 32.1018962), (34.8231945, 32.1018982), (34.823553, 32.1019991), (34.82419, 32.1023374),
                    (34.824362, 32.1025048), (34.8243891, 32.1025877), (34.8243857, 32.1026734),
                    (34.824326, 32.1027578), (34.8239109, 32.1029504), (34.8235091, 32.1030326),
                    (34.8231771, 32.1031533), (34.8230009, 32.1032952), (34.8229023, 32.1034659),
                    (34.8229568, 32.1036267), (34.8230358, 32.10373), (34.8232227, 32.1038817),
                    (34.8234574, 32.1040036), (34.8238356, 32.1042752), (34.824062, 32.1043751),
                    (34.8243509, 32.1044352), (34.8248109, 32.1046372), (34.8250307, 32.1047844),
                    (34.8251783, 32.1049404), (34.8270604, 32.1053496), (34.8274083, 32.1055175),
                    (34.8276484, 32.1055761), (34.8278538, 32.1056264), (34.8287154, 32.105837),
                    (34.829669, 32.1058398), (34.8307318, 32.1057934), (34.8319084, 32.1056474),
                    (34.8325033, 32.1054987), (34.8334364, 32.1053165), (34.8358728, 32.1051637),
                    (34.8360518, 32.1052103), (34.8370923, 32.1056993), (34.8377663, 32.1059198),
                    (34.8388579, 32.1063756), (34.8391843, 32.1065749), (34.8397401, 32.1069913),
                    (34.8398967, 32.1070285), (34.8400566, 32.10703), (34.8411167, 32.1068781),
                    (34.8413234, 32.1068658), (34.8414609, 32.1069067), (34.8417144, 32.1071222),
                    (34.8418284, 32.1072831), (34.8421244, 32.1079287), (34.8422498, 32.1081365),
                    (34.8424008, 32.1082559), (34.8425817, 32.108346), (34.8427541, 32.108396),
                    (34.8429511, 32.1084192), (34.8433886, 32.1084182), (34.8439359, 32.1082845),
                    (34.8439749, 32.1082697), (34.8445695, 32.1080439), (34.8454175, 32.1076388),
                    (34.8461924, 32.1070143), (34.8464509, 32.1067298), (34.8466399, 32.1066284),
                    (34.8467459, 32.1066083), (34.8472704, 32.1066121), (34.8476281, 32.1066784),
                    (34.8479118, 32.1067874), (34.8483472, 32.1070418), (34.8486193, 32.1071158),
                    (34.8489393, 32.1071083), (34.8492904, 32.1070252), (34.8507066, 32.1135971),
                    (34.8507523, 32.1136042), (34.8517177, 32.1177251), (34.8520325, 32.118816),
                    (34.8522454, 32.1194098), (34.852025, 32.1194489), (34.8516994, 32.1195568),
                    (34.8515269, 32.1196854), (34.8512412, 32.1197928), (34.851069, 32.119763),
                    (34.8509559, 32.1198084), (34.8502992, 32.1198229), (34.8503657, 32.1203348),
                    (34.8488717, 32.1186995), (34.8485139, 32.118774), (34.8485243, 32.119075), (34.846858, 32.1193465),
                    (34.846883, 32.1194824), (34.8462366, 32.1196508), (34.8452092, 32.119693),
                    (34.8442486, 32.1196987), (34.8442445, 32.1200059), (34.8443879, 32.1204688),
                    (34.8438202, 32.1206932), (34.8434454, 32.1208411), (34.8435433, 32.1210107),
                    (34.8422433, 32.121428), (34.8418771, 32.121516), (34.841839, 32.1220777), (34.8417407, 32.1235282),
                    (34.8412071, 32.1237045), (34.8410056, 32.1242673), (34.8399004, 32.1242641),
                    (34.8398841, 32.1243433), (34.8399484, 32.126432), (34.8367315, 32.1264412),
                    (34.8371684, 32.1272213), (34.8372908, 32.1277045), (34.8357802, 32.1277007),
                    (34.8357844, 32.1281295), (34.8333664, 32.1283981), (34.8333937, 32.1285305),
                    (34.8287032, 32.1287141), (34.8278424, 32.1278626), (34.8261645, 32.1278625),
                    (34.8272671, 32.1296665), (34.827578, 32.1303725), (34.8195006, 32.1306853),
                    (34.8199065, 32.1295424), (34.8217791, 32.1258882), (34.8220221, 32.1255311),
                    (34.8232667, 32.1246789), (34.8232264, 32.1233459), (34.8180476, 32.1237857),
                    (34.8147383, 32.1240989), (34.8109753, 32.12436), (34.8103851, 32.124401), (34.8101912, 32.1244147),
                    (34.8101758, 32.1260259), (34.8098512, 32.1273061),
                    (34.8089909, 32.1284068), (34.8082015, 32.1290689), (34.807171, 32.1297416),
                    (34.8058114, 32.1303143), (34.8044526, 32.1307057), (34.8034722, 32.1308688),
                    (34.8027372, 32.1309205),
                    (34.8016523, 32.1308327), (34.800819, 32.1307339), (34.799845, 32.1305354),
                    (34.7986357, 32.1300646), (34.7979102, 32.1296655), (34.7971035, 32.1290095),
                    (34.7967891, 32.1286557), (34.7958435, 32.1286938), (34.7969151, 32.1333335),
                    (34.7970983, 32.1338999), (34.7973073, 32.1343453), (34.7986886, 32.1368522),
                    (34.7989006, 32.1371663), (34.7993268, 32.1376869), (34.8005848, 32.1392238),
                    (34.8010857, 32.1399485), (34.8014463, 32.1405792), (34.8018443, 32.1414383),
                    (34.802672, 32.1439795), (34.8024176, 32.1440272), (34.8022547, 32.1440567),
                    (34.7980258, 32.1448395), (34.7969768, 32.1450129), (34.7919881, 32.1459706),
                    (34.7915488, 32.1460721), (34.7894874, 32.1465478), (34.7876295, 32.1469766),
                    (34.7865051, 32.1434619), (34.7754309, 32.1141553), (34.7715002, 32.1100105),
                    (34.7712454, 32.1036024), (34.7671088, 32.0966363), (34.7662195, 32.0951385),
                    (34.7636982, 32.0868051), (34.7591143, 32.0716524), (34.7540176, 32.0605762),
                    (34.7509753, 32.0591076), (34.7480748, 32.0577074), (34.7407703, 32.0479843),
                    (34.7407755, 32.0385723), (34.739131, 32.0337564)]
    }
    berlin = {
        "country": "Germany",
        "city": "Berlin",
        "polygon": [(13.17135715, 52.3977623), (13.17135334, 52.39770126), (13.17152119, 52.39583206),
                    (13.16889191, 52.39491272), (13.16589737, 52.39427567), (13.16327095, 52.39413452),
                    (13.15888882, 52.39390945), (13.15314579, 52.39480972), (13.1459446, 52.39542007),
                    (13.1436367, 52.3962059), (13.14349651, 52.39657974), (13.14261246, 52.39654541),
                    (13.14159584, 52.39602661), (13.13224983, 52.38940048), (13.13415909, 52.38861465),
                    (13.13358974, 52.38691711), (13.13098907, 52.3872261), (13.12813568, 52.38872528),
                    (13.12709427, 52.38928223), (13.12746525, 52.39159393), (13.13107586, 52.39147186),
                    (13.13241196, 52.39142227), (13.13811684, 52.39539337), (13.13796139, 52.39625931),
                    (13.13635635, 52.39673615), (13.1346817, 52.39726639), (13.13620186, 52.39861298),
                    (13.13455296, 52.39909744), (13.13339615, 52.39943695), (13.13279343, 52.39894867),
                    (13.13202858, 52.39845276), (13.13122749, 52.39808273), (13.1299305, 52.39753342),
                    (13.1280365, 52.39684677), (13.12710857, 52.3965683), (13.12590694, 52.39664841),
                    (13.12487602, 52.3968811), (13.12106895, 52.39920425), (13.11866474, 52.40112686),
                    (13.11815453, 52.4017067), (13.11750126, 52.40210724), (13.1167326, 52.40230179),
                    (13.11571789, 52.40256119), (13.11229324, 52.40388489), (13.11163616, 52.4042244),
                    (13.11127663, 52.40461731), (13.11091232, 52.40519333), (13.11060524, 52.40573883),
                    (13.10990143, 52.40628433), (13.10845757, 52.40726089), (13.10967064, 52.40858078),
                    (13.10793209, 52.40947723), (13.11259651, 52.41001892), (13.11157036, 52.41313553),
                    (13.10969257, 52.41296005), (13.10586643, 52.41257477), (13.10566998, 52.41143036),
                    (13.10322475, 52.4102211), (13.10083485, 52.41107178), (13.10082912, 52.41249466),
                    (13.09722137, 52.41245651), (13.09762573, 52.4110527), (13.09851551, 52.41040039),
                    (13.09729385, 52.40938568), (13.09545898, 52.40997314), (13.09427738, 52.41040421),
                    (13.09312534, 52.41083145), (13.09167957, 52.41152954), (13.09111309, 52.41165924),
                    (13.09063625, 52.41181564), (13.09034348, 52.41209793), (13.09018326, 52.41239166),
                    (13.0901289, 52.41272354), (13.09010983, 52.41366959), (13.08833313, 52.41961288),
                    (13.09551525, 52.42179108), (13.09599972, 52.42209625), (13.09741592, 52.42315292),
                    (13.09797382, 52.42391205), (13.09824371, 52.42453384), (13.09873867, 52.42501068),
                    (13.09959698, 52.42530441), (13.10043907, 52.42531586), (13.10107899, 52.42507172),
                    (13.10185432, 52.42473984), (13.10461903, 52.42405319), (13.10552979, 52.42526245),
                    (13.10686016, 52.42563248), (13.10790539, 52.42672348), (13.11253738, 52.42922592),
                    (13.11257553, 52.42988205), (13.11194611, 52.43159103), (13.11199284, 52.43232346),
                    (13.11359787, 52.43290329), (13.11397171, 52.43325806), (13.11492634, 52.43422699),
                    (13.11528492, 52.43457794), (13.11554909, 52.43481445), (13.1158123, 52.43504333),
                    (13.11624432, 52.43536758), (13.11653614, 52.43557739), (13.11702919, 52.43596268),
                    (13.11774445, 52.43635178), (13.11888981, 52.43680191), (13.12086964, 52.43743515),
                    (13.12167263, 52.43781281), (13.12222767, 52.4382515), (13.12274075, 52.43871689),
                    (13.12317657, 52.43936539), (13.11960697, 52.44153976), (13.11905384, 52.44290924),
                    (13.11900043, 52.44400787), (13.11531544, 52.4457283), (13.11364937, 52.44706345),
                    (13.10922337, 52.45061874), (13.11151886, 52.45337677), (13.11190224, 52.45413208),
                    (13.1125803, 52.45920181), (13.11087227, 52.46049118), (13.11076641, 52.46120453),
                    (13.11100101, 52.46194458), (13.11135769, 52.46300888), (13.11129093, 52.46364212),
                    (13.11074352, 52.46511078), (13.11072636, 52.46558762), (13.11079884, 52.46606445),
                    (13.11112022, 52.46652222), (13.11163902, 52.46707916), (13.11234379, 52.46754074),
                    (13.1131916, 52.4679451), (13.11376095, 52.46834564), (13.11404037, 52.46884537),
                    (13.11411572, 52.46938324), (13.11434269, 52.47000122), (13.11487484, 52.47052765),
                    (13.11639023, 52.47174454), (13.11691666, 52.47244644), (13.11752415, 52.47401428),
                    (13.11753845, 52.47476959), (13.11760902, 52.47724533), (13.11779785, 52.47896957),
                    (13.12094021, 52.47937012), (13.1240654, 52.47977448), (13.12528419, 52.48021698),
                    (13.12636852, 52.48106766), (13.12977791, 52.48374176), (13.14208126, 52.49338531),
                    (13.14793777, 52.49796295), (13.15369606, 52.50181961), (13.15999889, 52.50591278),
                    (13.16645718, 52.51012421), (13.15655899, 52.51382446), (13.1543951, 52.51463699),
                    (13.14745331, 52.51723099), (13.14538097, 52.5175972), (13.14453316, 52.51898575),
                    (13.14301014, 52.51967621), (13.14164257, 52.51949692), (13.13816357, 52.51903534),
                    (13.12685204, 52.51756287), (13.11739254, 52.51699448), (13.11855316, 52.52196503),
                    (13.11883068, 52.52493668), (13.11900234, 52.52713013), (13.11915874, 52.52904892),
                    (13.11973286, 52.53104401), (13.12019348, 52.53172684), (13.12118435, 52.5331955),
                    (13.12155819, 52.5342598), (13.12319088, 52.53679657), (13.12352848, 52.53767776),
                    (13.12405205, 52.53903961), (13.12511253, 52.54379654), (13.12777042, 52.54985809),
                    (13.13061714, 52.55635452), (13.13353252, 52.55370712), (13.13629627, 52.55274582),
                    (13.14146137, 52.55247116), (13.14384365, 52.55207062), (13.14566517, 52.55290985),
                    (13.14714527, 52.55473328), (13.14684772, 52.55669022), (13.14631748, 52.55870819),
                    (13.14595509, 52.56007767), (13.14672279, 52.56207657), (13.14789104, 52.56510925),
                    (13.14928246, 52.56666183), (13.15012074, 52.56759644), (13.15295315, 52.57278061),
                    (13.15297127, 52.57832336), (13.14960289, 52.58330917), (13.13976574, 52.58057404),
                    (13.13209248, 52.57970047), (13.13043308, 52.58312607), (13.12809658, 52.58309555),
                    (13.12898731, 52.58744049), (13.13002968, 52.58733749), (13.13233948, 52.58741379),
                    (13.13356876, 52.58746719), (13.13434029, 52.58752441), (13.13486004, 52.58757401),
                    (13.1356039, 52.58765793), (13.13611031, 52.58772659), (13.13664722, 52.58781433),
                    (13.13737965, 52.58795929), (13.1380682, 52.58810806), (13.13899708, 52.58832932),
                    (13.14052963, 52.58875656), (13.14140129, 52.58901596), (13.1422596, 52.58928299),
                    (13.14575291, 52.59040451), (13.14685154, 52.5907402), (13.1480875, 52.59114456),
                    (13.14890194, 52.59142303), (13.15388775, 52.59577942), (13.15709972, 52.59760666),
                    (13.16426277, 52.59889984), (13.1659174, 52.59803391), (13.1687851, 52.59705353),
                    (13.17382431, 52.59532928), (13.17877483, 52.59464645), (13.18392849, 52.59355545),
                    (13.18800926, 52.59162903), (13.19216442, 52.58996201), (13.19982719, 52.58889389),
                    (13.20215607, 52.5880661), (13.20331287, 52.58765411), (13.20662594, 52.5867424),
                    (13.20736504, 52.5884552), (13.21394825, 52.58779526), (13.21733665, 52.58745575),
                    (13.21889782, 52.59078598), (13.21863461, 52.59204102), (13.21781921, 52.59322357),
                    (13.21613503, 52.59443665), (13.21253777, 52.59628296), (13.21103477, 52.59709167),
                    (13.20872021, 52.59863663), (13.20685005, 52.60020828), (13.20692825, 52.60028839),
                    (13.20332336, 52.60323715), (13.20208359, 52.60448837), (13.20168781, 52.6052742),
                    (13.20160675, 52.60638046), (13.2019577, 52.60705566), (13.20268917, 52.60741806),
                    (13.20370197, 52.6077919), (13.20495129, 52.60816193), (13.20596409, 52.6085434),
                    (13.20683861, 52.60906219), (13.20740032, 52.60980606), (13.2151165, 52.61954117),
                    (13.21698475, 52.62011719), (13.21967125, 52.62442398), (13.22059059, 52.62714767),
                    (13.2206831, 52.62817764), (13.22763443, 52.62770844), (13.23036385, 52.62736511),
                    (13.23713017, 52.62772369), (13.23833084, 52.62778854), (13.24357033, 52.62810135),
                    (13.24649334, 52.62729645), (13.25234032, 52.62763977), (13.2573328, 52.62778091),
                    (13.26041698, 52.62768173), (13.2642746, 52.62692642), (13.26461506, 52.62956619),
                    (13.26498699, 52.63251877), (13.26522636, 52.63441849), (13.26425171, 52.63683701),
                    (13.26274395, 52.63853455), (13.26256275, 52.63919449), (13.26215649, 52.6407547),
                    (13.26668644, 52.64009094), (13.26835728, 52.6398468), (13.28244114, 52.64129639),
                    (13.28344345, 52.65264511), (13.28148174, 52.65274429), (13.28188801, 52.6550827),
                    (13.28221893, 52.65698624), (13.2828846, 52.66078568), (13.28583813, 52.66021347),
                    (13.29459476, 52.65919113), (13.30756569, 52.65930557), (13.3081398, 52.65879822),
                    (13.30876541, 52.6583786), (13.3093586, 52.65793228), (13.3100338, 52.65737534),
                    (13.30037785, 52.65346909), (13.30449963, 52.64865875), (13.30824471, 52.6439743),
                    (13.30912685, 52.64389038), (13.30925751, 52.64313889), (13.30919456, 52.64285278),
                    (13.3088398, 52.6414299), (13.30757618, 52.64027786), (13.3069725, 52.63972855),
                    (13.30786037, 52.63761902), (13.30311203, 52.63666916), (13.30489635, 52.63446808),
                    (13.307477, 52.63269043), (13.3083086, 52.62969208), (13.30236435, 52.62875748),
                    (13.30242252, 52.62755966), (13.3131218, 52.62838364), (13.32349873, 52.62643051),
                    (13.32663918, 52.62584686), (13.32886219, 52.62543106), (13.33175564, 52.62442017),
                    (13.33648014, 52.62266922), (13.33750153, 52.62290955), (13.33856487, 52.62312698),
                    (13.33944702, 52.62327576), (13.34058857, 52.62332153), (13.34211731, 52.62341309),
                    (13.34418774, 52.6234169), (13.34461308, 52.6247673), (13.35089207, 52.62467194),
                    (13.35236168, 52.62336731), (13.35320187, 52.62356567), (13.35407543, 52.623806),
                    (13.35452652, 52.62392044), (13.35473537, 52.62395096), (13.35495949, 52.62398911),
                    (13.35518265, 52.62401199), (13.35542011, 52.62401581), (13.35561085, 52.62400055),
                    (13.35584545, 52.62397003), (13.35603428, 52.62392044), (13.35626698, 52.62385941),
                    (13.35648441, 52.62379074), (13.35713482, 52.62355042), (13.35736752, 52.62348175),
                    (13.35755539, 52.62342453), (13.35778999, 52.62338257), (13.35798073, 52.62337112),
                    (13.35821819, 52.62337494), (13.35841179, 52.62339401), (13.35859108, 52.62343597),
                    (13.35883141, 52.62348557), (13.35901165, 52.62353516), (13.35940552, 52.62368011),
                    (13.35978508, 52.6238327), (13.36076069, 52.62429428), (13.36115551, 52.6244545),
                    (13.36155033, 52.62460709), (13.36176109, 52.62467575), (13.36216831, 52.62479019),
                    (13.362813, 52.62493896), (13.36434269, 52.62527084), (13.36500359, 52.62542725),
                    (13.36585999, 52.62562943), (13.36647701, 52.6258049), (13.3671093, 52.62598038),
                    (13.36772823, 52.62617111), (13.36833286, 52.62637329), (13.36872673, 52.62652588),
                    (13.36909199, 52.62668991), (13.37020493, 52.62720108), (13.37058449, 52.62735367),
                    (13.37078094, 52.62742996), (13.37099266, 52.62749863), (13.37141418, 52.62761307),
                    (13.3724823, 52.62789536), (13.37291813, 52.6280098), (13.37334061, 52.62813568),
                    (13.37350845, 52.62821198), (13.37369061, 52.62828827), (13.37387371, 52.62837601),
                    (13.37402725, 52.62847137), (13.37422657, 52.62857437), (13.37439632, 52.628685),
                    (13.37453842, 52.62881851), (13.37467861, 52.62892914), (13.3748045, 52.62905502),
                    (13.37491608, 52.62917709), (13.37498379, 52.62931061), (13.37502098, 52.62943649),
                    (13.37502956, 52.62956238), (13.37499428, 52.62969589), (13.37492847, 52.62983322),
                    (13.37483406, 52.62997055), (13.37452126, 52.63040161), (13.37444115, 52.63053894),
                    (13.37436199, 52.63067627), (13.37432575, 52.63080978),
                    (13.37431908, 52.63093567), (13.37434196, 52.63106155), (13.37443924, 52.63118744),
                    (13.37450504, 52.63129425), (13.37460232, 52.63143539), (13.3747282, 52.63153839),
                    (13.37499428, 52.63176727), (13.37528896, 52.63199234), (13.37610817, 52.63253403),
                    (13.37643337, 52.63275909), (13.37800312, 52.63371277), (13.37979698, 52.63469315),
                    (13.38087845, 52.63518143), (13.3819809, 52.63576889), (13.38309669, 52.63632584),
                    (13.38381767, 52.6364975), (13.38498974, 52.6365509), (13.38612366, 52.63669586),
                    (13.38729954, 52.637043), (13.38868237, 52.6376152), (13.38938904, 52.63824463),
                    (13.38984871, 52.63894653), (13.39007664, 52.63973236), (13.39003849, 52.64051437),
                    (13.3898716, 52.64136505), (13.39002895, 52.64173889), (13.39032745, 52.64222717),
                    (13.39088535, 52.64262772), (13.39164734, 52.64320374), (13.39225864, 52.64373016),
                    (13.39243031, 52.64432907), (13.3926096, 52.64503479), (13.39304829, 52.64564514),
                    (13.39354038, 52.64615631), (13.39472771, 52.64713287), (13.39633465, 52.64818573),
                    (13.3967123, 52.64830017), (13.39712906, 52.6483345), (13.39853954, 52.64819336),
                    (13.40699768, 52.64242172), (13.41282845, 52.64358521), (13.41361618, 52.64251328),
                    (13.41711617, 52.63970184), (13.42436504, 52.63563156), (13.42670631, 52.63682556),
                    (13.42835903, 52.63766479), (13.43268299, 52.63750839), (13.43377876, 52.6379776),
                    (13.43366146, 52.63911438), (13.43344021, 52.64160156), (13.43410397, 52.64428711),
                    (13.43750381, 52.64491272), (13.43989849, 52.64533234), (13.44093227, 52.64912415),
                    (13.44682884, 52.65013885), (13.45454597, 52.65004349), (13.45396423, 52.64862442),
                    (13.4598484, 52.64810181), (13.4608593, 52.64861679), (13.46181679, 52.64899826),
                    (13.4626627, 52.64970779), (13.46372128, 52.65027618), (13.46513748, 52.65089035),
                    (13.46630383, 52.65129089), (13.46831512, 52.65172195), (13.46999645, 52.65207672),
                    (13.47114754, 52.6526947), (13.4727459, 52.65359116), (13.47354507, 52.65404129),
                    (13.47386932, 52.65446472), (13.47408962, 52.65510559), (13.47395802, 52.65579224),
                    (13.47387218, 52.65629196), (13.47389412, 52.6566124), (13.47110367, 52.65681839),
                    (13.46233273, 52.65746307), (13.45999908, 52.65875244), (13.45794582, 52.65988922),
                    (13.45510864, 52.66145706), (13.45084095, 52.66272354), (13.45243359, 52.66386414),
                    (13.45951176, 52.66893387), (13.46596527, 52.66714859), (13.47176743, 52.67192841),
                    (13.47539425, 52.67491531), (13.47727013, 52.67418671), (13.47879028, 52.67345428),
                    (13.476614, 52.67120743), (13.47601128, 52.67038727), (13.47564411, 52.66959),
                    (13.4755125, 52.66878128), (13.47563171, 52.66671371), (13.47564793, 52.66627884),
                    (13.479002, 52.6677475), (13.48821926, 52.6705513), (13.48795605, 52.66952133),
                    (13.48760414, 52.66814804), (13.48723412, 52.66670609), (13.4852953, 52.6591301),
                    (13.48797894, 52.65699387), (13.49083138, 52.65472794), (13.49985123, 52.6510849),
                    (13.50304604, 52.64997101), (13.50427914, 52.64959717), (13.50539494, 52.64925385),
                    (13.50708294, 52.64834213), (13.50977802, 52.64687729), (13.51193333, 52.64593506),
                    (13.51278114, 52.64556122), (13.51749611, 52.64723587), (13.51887321, 52.64747238),
                    (13.51939774, 52.64669418), (13.52049923, 52.64525223), (13.5230999, 52.64543152),
                    (13.52291775, 52.64426422), (13.52248192, 52.64159775), (13.52207088, 52.63896561),
                    (13.51848412, 52.63163376), (13.51769829, 52.62963486), (13.5122776, 52.62799072),
                    (13.50804043, 52.62656784), (13.50581741, 52.62582779), (13.50556469, 52.62251282),
                    (13.50535202, 52.61955643), (13.50324345, 52.61877441), (13.50244522, 52.61745453),
                    (13.50021839, 52.61379242), (13.49854565, 52.61068344), (13.49729347, 52.60677338),
                    (13.49675274, 52.60509491), (13.49900436, 52.60516357), (13.50815392, 52.59218216),
                    (13.52243042, 52.59285355), (13.52730751, 52.59220886), (13.53376484, 52.59087753),
                    (13.54162788, 52.5891571), (13.54711246, 52.587883), (13.55578041, 52.58411789),
                    (13.55727291, 52.5832634), (13.55986118, 52.58177567), (13.56217957, 52.57981873),
                    (13.56400681, 52.57802582), (13.56694889, 52.5743866), (13.56756973, 52.57374191),
                    (13.56974506, 52.57315445), (13.57063007, 52.57291412), (13.57556248, 52.57376099),
                    (13.57713318, 52.57275009), (13.57804966, 52.57104492), (13.58154011, 52.57088089),
                    (13.58176899, 52.57034683), (13.58207607, 52.569664), (13.58232403, 52.56897354),
                    (13.58250904, 52.56843567), (13.5826416, 52.56800842), (13.58278084, 52.56745529),
                    (13.58305931, 52.5663414), (13.58319855, 52.56579971), (13.5833168, 52.56537247),
                    (13.58375359, 52.56399536), (13.58385754, 52.56357574), (13.58396244, 52.56315994),
                    (13.58400249, 52.56288147), (13.5840416, 52.56259918), (13.58406258, 52.56161118),
                    (13.58409214, 52.56118774), (13.58416653, 52.56077194), (13.58422184, 52.56049728),
                    (13.58428669, 52.56036377), (13.58433628, 52.56022644), (13.58443069, 52.56009674),
                    (13.58460522, 52.55984879), (13.58483982, 52.55960083), (13.58533764, 52.55911255),
                    (13.58555698, 52.55886459), (13.5856514, 52.55873489), (13.58582497, 52.55847931),
                    (13.58598423, 52.55821228), (13.58632565, 52.55759048), (13.58711433, 52.55661011),
                    (13.58731461, 52.55607986), (13.5874939, 52.55526733), (13.58755016, 52.55436707),
                    (13.58751869, 52.55348587), (13.58729935, 52.55243683), (13.58681965, 52.55147552),
                    (13.58637238, 52.55034637), (13.58604145, 52.54960632), (13.58565426, 52.54891586),
                    (13.58538723, 52.54847336), (13.58598614, 52.54837418), (13.58690548, 52.54821777),
                    (13.59208679, 52.54735565), (13.5986557, 52.54626846), (13.60315037, 52.54551315),
                    (13.60787964, 52.54472733), (13.61082745, 52.54423523), (13.61885738, 52.54294968),
                    (13.61973572, 52.5428772), (13.62986851, 52.54206848), (13.63535881, 52.54162979),
                    (13.63506985, 52.54087067), (13.63194084, 52.53814316), (13.63057613, 52.53804398),
                    (13.62673283, 52.53775024), (13.62590694, 52.53014755), (13.62708187, 52.53027725),
                    (13.63138199, 52.53076935), (13.64261532, 52.53058624), (13.65013027, 52.53020859),
                    (13.65533638, 52.52994537), (13.65689564, 52.52986908), (13.65694332, 52.52949905),
                    (13.65721416, 52.52873611), (13.65766335, 52.52757263), (13.6579628, 52.52679825),
                    (13.65829372, 52.52626038), (13.6585722, 52.52581024), (13.65599823, 52.52446365),
                    (13.64698315, 52.52069473), (13.64404011, 52.51934052), (13.64001751, 52.51689148),
                    (13.63822365, 52.51571274), (13.63669205, 52.51469803), (13.63466644, 52.51316071),
                    (13.6333189, 52.51182556), (13.62936306, 52.50630188), (13.62905121, 52.50542831),
                    (13.62830067, 52.50333405), (13.62652493, 52.49839401), (13.62467098, 52.49518585),
                    (13.626544, 52.49463654), (13.63080025, 52.49412155), (13.62963104, 52.4930191),
                    (13.62522697, 52.48929214), (13.61501122, 52.48082352), (13.61410809, 52.47771454),
                    (13.61353779, 52.47574997), (13.61639786, 52.47489166), (13.61358643, 52.472435),
                    (13.61151695, 52.47062683), (13.61517143, 52.46975708), (13.61712837, 52.47119141),
                    (13.62111187, 52.47040558), (13.62102795, 52.46856308), (13.6226387, 52.46849823),
                    (13.62550831, 52.46835709), (13.62580776, 52.47371292), (13.6288147, 52.4734993),
                    (13.63196659, 52.47514725), (13.63490009, 52.47579193), (13.63772106, 52.47754288),
                    (13.63961411, 52.47848511), (13.64061356, 52.47948456), (13.64331627, 52.47914505),
                    (13.64821529, 52.47878265), (13.6548624, 52.47687912), (13.65774059, 52.47504044),
                    (13.66000462, 52.47411728), (13.66463184, 52.47367859), (13.66697979, 52.47416687),
                    (13.67066097, 52.47306061), (13.67450047, 52.47086334), (13.67878723, 52.4693718),
                    (13.67913532, 52.46908569), (13.68259907, 52.46618652), (13.68675327, 52.46511078),
                    (13.69484138, 52.46424866), (13.69682503, 52.46416092), (13.69699669, 52.46347046),
                    (13.69714355, 52.46305466), (13.69754314, 52.46224213), (13.6977253, 52.46169662),
                    (13.69775486, 52.46128082), (13.6977005, 52.46072388), (13.69753265, 52.4600296),
                    (13.69716263, 52.45876694), (13.69843292, 52.45508194), (13.70124912, 52.45470047),
                    (13.70444393, 52.45426559), (13.70536518, 52.45576477), (13.70562649, 52.45778275),
                    (13.70533276, 52.45943069), (13.70515156, 52.4604454), (13.70405197, 52.46423721),
                    (13.70242596, 52.46519852), (13.69985199, 52.46692276), (13.69919109, 52.46820068),
                    (13.70132446, 52.46814728), (13.70398903, 52.46686935), (13.7113905, 52.46332169),
                    (13.7134943, 52.4622612), (13.71644783, 52.46219254), (13.72064209, 52.4565773),
                    (13.72911263, 52.45059586), (13.73221302, 52.45008087), (13.73478127, 52.45075989),
                    (13.73892975, 52.44903564), (13.74527073, 52.44849777), (13.7466116, 52.44834518),
                    (13.7532196, 52.4475975), (13.75447941, 52.44688034), (13.75436306, 52.44572067),
                    (13.75410748, 52.44317245), (13.75689697, 52.44284439), (13.75902843, 52.44258118),
                    (13.75766373, 52.43878937), (13.76046944, 52.43848038), (13.7600193, 52.43735123),
                    (13.75958729, 52.43627167), (13.75746822, 52.43650055), (13.75467682, 52.43680191),
                    (13.75229645, 52.43708038), (13.75421524, 52.44161224), (13.75053596, 52.44145966),
                    (13.74406052, 52.43806839), (13.74311829, 52.43399811), (13.73795891, 52.43413925),
                    (13.73780346, 52.43321609), (13.73762321, 52.43234634), (13.74003983, 52.43215561),
                    (13.73946095, 52.43005371), (13.74205399, 52.4296608), (13.74167728, 52.42811584),
                    (13.74138451, 52.42691422), (13.74056435, 52.42636108), (13.74036121, 52.42641068),
                    (13.74014473, 52.42646408), (13.73922729, 52.42661285), (13.73790646, 52.42687607),
                    (13.73342037, 52.42281723), (13.73135281, 52.42073059), (13.73144341, 52.41953278),
                    (13.73059273, 52.41896439), (13.7299757, 52.41818237), (13.72951317, 52.41739273),
                    (13.72946262, 52.41669083), (13.72965717, 52.41592407), (13.73027802, 52.41498947),
                    (13.73072815, 52.41449356), (13.73106956, 52.41413116), (13.73212528, 52.41304016),
                    (13.7324667, 52.41267395), (13.73266983, 52.41242218), (13.7327776, 52.4122963),
                    (13.73288536, 52.41215515), (13.73326302, 52.41146088), (13.73332691, 52.41133499),
                    (13.73342133, 52.41120529), (13.73353004, 52.41108704), (13.73365498, 52.41097641),
                    (13.73379517, 52.41088104), (13.73395061, 52.41079712), (13.73415089, 52.41071701),
                    (13.73435307, 52.41065979), (13.7345705, 52.41060638), (13.73480225, 52.41055679),
                    (13.7355442, 52.41043854), (13.73597908, 52.41034698), (13.73619556, 52.41028595),
                    (13.73636818, 52.41022491), (13.73655319, 52.41014099), (13.73669434, 52.41005707),
                    (13.73681927, 52.40994263), (13.73689842, 52.40982437), (13.73699188, 52.40969849),
                    (13.73702717, 52.40956116), (13.7370615, 52.40942383), (13.73719501, 52.40882874),
                    (13.73722839, 52.40868378), (13.73729134, 52.408535), (13.73737049, 52.40840912),
                    (13.7374649, 52.40828705), (13.73758888, 52.40816879), (13.7376976, 52.40804672),
                    (13.73797607, 52.40782547), (13.73826885, 52.4076004), (13.73833942, 52.40755463),
                    (13.7351656, 52.40600204), (13.73453808, 52.40197754), (13.73099232, 52.39995575),
                    (13.72821617, 52.40023041), (13.72482872, 52.39957428), (13.7233448, 52.39858627),
                    (13.72188759, 52.39899445), (13.72086239, 52.39926529), (13.71942139, 52.39866257),
                    (13.71729183, 52.39871979), (13.71643639, 52.3995285), (13.71284199, 52.39804077),
                    (13.70890522, 52.39545441), (13.70577908, 52.39500427), (13.70563793, 52.39467621),
                    (13.7053833, 52.39437103), (13.70505238, 52.39409637), (13.70456314, 52.39379883),
                    (13.70404339, 52.39359665), (13.70317841, 52.39347839), (13.70242214, 52.39202499),
                    (13.69899368, 52.39016342), (13.69863701, 52.39202881), (13.69809246, 52.39204025),
                    (13.69777203, 52.39190674), (13.69743729, 52.39158249), (13.69741726, 52.39148331),
                    (13.69737625, 52.3912735), (13.69738674, 52.39086914), (13.69739819, 52.39048767),
                    (13.69737625, 52.39017868), (13.69711971, 52.38985443), (13.69679165, 52.38962173),
                    (13.69634247, 52.38932419), (13.69549274, 52.38893127), (13.69533825, 52.38883972),
                    (13.69514179, 52.38876343), (13.69435596, 52.3882103), (13.69374371, 52.3878212),
                    (13.69340611, 52.38745117), (13.69283009, 52.38701248), (13.69225788, 52.38662338),
                    (13.69172001, 52.38618469), (13.69122887, 52.38584137), (13.69066429, 52.38557053),
                    (13.69010353, 52.38534546), (13.68962765, 52.38521576), (13.68922329, 52.38529205),
                    (13.68901348, 52.38533401), (13.68885803, 52.38541794), (13.68870354, 52.38553238),
                    (13.68827534, 52.38592148), (13.68756199, 52.3858223), (13.68653297, 52.38384628),
                    (13.68774128, 52.38386154), (13.68806171, 52.38291168), (13.68975353, 52.38331604),
                    (13.69488239, 52.38097382), (13.69863319, 52.38158417), (13.69687557, 52.37755585),
                    (13.69973755, 52.37788391), (13.70050716, 52.37795258), (13.69999695, 52.37512207),
                    (13.69898319, 52.37410355), (13.69781971, 52.37325287), (13.69744587, 52.37295532),
                    (13.6965723, 52.3722496), (13.69602489, 52.37179565), (13.69577503, 52.37158966),
                    (13.69563389, 52.37146759), (13.6954937, 52.37135315), (13.6949749, 52.37088013),
                    (13.69435883, 52.37028503), (13.69400883, 52.36991501), (13.69333935, 52.3691864),
                    (13.6929903, 52.36882782), (13.6924572, 52.3683548), (13.69220448, 52.36811829),
                    (13.69206429, 52.36800385), (13.69190979, 52.36789322), (13.69174099, 52.36779785),
                    (13.69157314, 52.36771011), (13.69137669, 52.36763763), (13.69118023, 52.36756897),
                    (13.69077492, 52.3674469), (13.69056416, 52.36737823), (13.69011593, 52.36727524),
                    (13.6896677, 52.3671875), (13.68943119, 52.36715698), (13.68920898, 52.36713409),
                    (13.68898678, 52.36711502), (13.68876457, 52.36709213), (13.68855858, 52.36709976),
                    (13.68832397, 52.36710358), (13.68810558, 52.36713028), (13.68763828, 52.3671875),
                    (13.6871748, 52.36727905), (13.68695736, 52.36732101), (13.68652344, 52.36743164),
                    (13.68610573, 52.3675499), (13.68591976, 52.36762619), (13.6857338, 52.36769485),
                    (13.68537903, 52.36787796), (13.68434715, 52.36846161), (13.68399143, 52.3686409),
                    (13.68380642, 52.36872101), (13.68360519, 52.3687973), (13.68320274, 52.36892319),
                    (13.68278503, 52.36904526), (13.68256855, 52.36910248), (13.68211937, 52.36919785),
                    (13.68188667, 52.36923981), (13.68143463, 52.36929703), (13.68121624, 52.36931992),
                    (13.68098164, 52.36932373), (13.68074608, 52.36933136), (13.68055534, 52.36932755),
                    (13.68031883, 52.3693161), (13.67987442, 52.36926651), (13.67965126, 52.36923599),
                    (13.67918968, 52.36915588), (13.67896652, 52.36911774), (13.6785326, 52.36901093),
                    (13.67809868, 52.36890793), (13.67767906, 52.36879349), (13.6774683, 52.36872482),
                    (13.67727184, 52.36865997), (13.67709064, 52.36858368), (13.67672539, 52.36841202),
                    (13.67581081, 52.36795807), (13.67543316, 52.36781693), (13.6752367, 52.36774063),
                    (13.67502689, 52.36768341), (13.67460728, 52.36756897), (13.67416, 52.36748123),
                    (13.6732645, 52.36729813), (13.67283154, 52.36719894), (13.67262077, 52.36714172),
                    (13.67242622, 52.3670845), (13.67222977, 52.36701965), (13.67204762, 52.36693192),
                    (13.67187977, 52.36684799), (13.67171288, 52.3667717), (13.67154312, 52.3666687),
                    (13.67123508, 52.36645889), (13.67108059, 52.3663559), (13.67080021, 52.36613846),
                    (13.67053318, 52.36589432), (13.66962242, 52.36507034), (13.668993, 52.36448288),
                    (13.66839218, 52.36388779), (13.66804218, 52.36351776), (13.66770744, 52.36315155),
                    (13.66728973, 52.36264801), (13.66709518, 52.36239243), (13.66691589, 52.36213684),
                    (13.66666794, 52.36174774), (13.6665163, 52.36148071), (13.66644859, 52.3613472),
                    (13.66627312, 52.36093903), (13.66614056, 52.36051941), (13.66603756, 52.36010742),
                    (13.66600323, 52.35982895), (13.66592979, 52.3589859), (13.66595173, 52.35866928),
                    (13.66594028, 52.35851669), (13.66588783, 52.35839081), (13.66525841, 52.35823059),
                    (13.66457272, 52.35805893), (13.66365528, 52.35762787), (13.663064, 52.35718536),
                    (13.6625061, 52.35654068), (13.66245556, 52.35582733), (13.66239548, 52.35497284),
                    (13.66188908, 52.35441589), (13.66120911, 52.35403061), (13.66020298, 52.35366058),
                    (13.65918827, 52.3531723), (13.65906143, 52.35268784), (13.65860558, 52.3521843),
                    (13.6576519, 52.35189819), (13.65697575, 52.35157013), (13.65669823, 52.35094833),
                    (13.65664673, 52.35020828), (13.65655231, 52.34952545), (13.65613365, 52.34887695),
                    (13.65600204, 52.34833908), (13.65591717, 52.34779739), (13.65551281, 52.34735107),
                    (13.65472317, 52.34674454), (13.65393829, 52.34619141), (13.65329266, 52.34563828),
                    (13.6527338, 52.34499359), (13.65246105, 52.34442902), (13.65193939, 52.34364319),
                    (13.65107822, 52.34266663), (13.65172291, 52.33945847), (13.65071774, 52.33890533),
                    (13.64840031, 52.33824158), (13.64740944, 52.33830643), (13.64539242, 52.3388176),
                    (13.64506149, 52.33925247), (13.64453793, 52.33994293), (13.64328861, 52.33998871),
                    (13.64264488, 52.3400116), (13.64200115, 52.3406868), (13.6408186, 52.34192657),
                    (13.6384058, 52.34345627), (13.6379509, 52.34382248), (13.63690472, 52.34513474),
                    (13.6362915, 52.34703827), (13.63668156, 52.34817123), (13.63774872, 52.34831619),
                    (13.63793945, 52.35660934), (13.63810444, 52.35719299), (13.63828754, 52.3577919),
                    (13.63848495, 52.35843658), (13.63852024, 52.35853577), (13.63837337, 52.35950089),
                    (13.63863754, 52.36016083), (13.63923454, 52.36113739), (13.64017391, 52.36210251),
                    (13.64100552, 52.36288071), (13.6420126, 52.36348343), (13.64250755, 52.36371613),
                    (13.64439392, 52.36460114), (13.64593315, 52.36524963), (13.64683342, 52.36610031),
                    (13.64710522, 52.36687469), (13.64713669, 52.36777115), (13.64695168, 52.36872482),
                    (13.64672279, 52.3694191), (13.64680576, 52.37015915), (13.64358997, 52.37050247),
                    (13.64277554, 52.37060928), (13.64169693, 52.37095261), (13.64222908, 52.37478256),
                    (13.64336491, 52.37739182), (13.64170074, 52.3772049), (13.63339138, 52.37628555),
                    (13.6317482, 52.37802887), (13.62794971, 52.38179016), (13.61246204, 52.3767662),
                    (13.61123466, 52.37636566), (13.60695934, 52.37498093), (13.60702324, 52.3759079),
                    (13.60563278, 52.37770844), (13.60629559, 52.37964249), (13.60557079, 52.38043594),
                    (13.60462189, 52.38138962), (13.60365963, 52.38215256), (13.60323906, 52.38266754),
                    (13.60276222, 52.38321686), (13.60206604, 52.38379288), (13.60084248, 52.38460159),
                    (13.59948158, 52.3853569), (13.5986948, 52.38568115), (13.59745884, 52.38588333),
                    (13.59657288, 52.38605118), (13.59581566, 52.38637543), (13.5952282, 52.38682556),
                    (13.5947361, 52.38757324), (13.59453964, 52.38814545), (13.59396267, 52.38980865),
                    (13.5939312, 52.39041138), (13.59391689, 52.39085388), (13.59400082, 52.39164352),
                    (13.59394169, 52.39250183), (13.59360313, 52.39313126), (13.59338188, 52.39334488),
                    (13.59305096, 52.39366531), (13.59276199, 52.39416885), (13.58751965, 52.39238739),
                    (13.57075977, 52.38935089), (13.56490517, 52.38828659), (13.55885792, 52.38848495),
                    (13.55459118, 52.38847733), (13.54465008, 52.3887558), (13.5356636, 52.38901138),
                    (13.53479195, 52.39135361), (13.53508377, 52.39349747), (13.535779, 52.395298),
                    (13.53750896, 52.39891052), (13.53837967, 52.40068054), (13.53110218, 52.39860535),
                    (13.52826309, 52.39839554), (13.5251255, 52.39943695), (13.52148056, 52.401474),
                    (13.51838875, 52.40145111), (13.51516533, 52.40143585), (13.51204586, 52.40100098),
                    (13.50066662, 52.39939499), (13.49746132, 52.39898682), (13.49413776, 52.39857483),
                    (13.48969269, 52.39789581), (13.48666, 52.39743042), (13.48325348, 52.39686584),
                    (13.4798851, 52.39599609), (13.47919559, 52.39847183), (13.47875404, 52.4000206),
                    (13.47850418, 52.40090942), (13.47799015, 52.4020462), (13.47755814, 52.40306473),
                    (13.47415161, 52.40874863), (13.46833706, 52.41943359), (13.46232128, 52.42062378),
                    (13.4576025, 52.41960526), (13.45296669, 52.41828156), (13.44978523, 52.41737366),
                    (13.44717693, 52.41662979), (13.43886375, 52.41444016), (13.43601799, 52.41369247),
                    (13.43177986, 52.41257858), (13.42817688, 52.41193771), (13.42130661, 52.41041565),
                    (13.41993523, 52.41014099), (13.4187727, 52.40991592), (13.41843319, 52.40718079),
                    (13.42381001, 52.39505386), (13.4275856, 52.38682556), (13.42743206, 52.38581848),
                    (13.42448521, 52.38144684), (13.42098522, 52.37624741), (13.41790295, 52.37633896),
                    (13.40782928, 52.37684631), (13.40208721, 52.37713242), (13.40123558, 52.37717438),
                    (13.39776993, 52.37745667), (13.39438725, 52.37770844), (13.39149761, 52.37783432),
                    (13.38852119, 52.37796783), (13.38799858, 52.38220215), (13.38746548, 52.3864975),
                    (13.38721657, 52.38858414), (13.38239479, 52.3883934), (13.37879848, 52.38829041),
                    (13.37736893, 52.38825226), (13.37045383, 52.38846207), (13.37213516, 52.39382553),
                    (13.36594963, 52.3960228), (13.35920238, 52.39842606), (13.35259819, 52.40194702),
                    (13.34302807, 52.40767288), (13.34317303, 52.41025925), (13.34324837, 52.41162109),
                    (13.33644676, 52.40901947), (13.33101559, 52.40690613), (13.3273201, 52.4054718),
                    (13.31412697, 52.40076447), (13.31192589, 52.39918518), (13.3058691, 52.4052887),
                    (13.2985487, 52.41202927), (13.29687119, 52.4139328), (13.29692554, 52.41480255),
                    (13.29678249, 52.41581345), (13.29613018, 52.4164505), (13.29567528, 52.41623688),
                    (13.29417133, 52.41548157), (13.29090309, 52.41381073), (13.28529453, 52.41070938),
                    (13.28202248, 52.40872574), (13.27811527, 52.40646362), (13.27781105, 52.40631104),
                    (13.27726555, 52.40605164), (13.27703857, 52.40594864), (13.2767067, 52.40581512),
                    (13.27631474, 52.40567017), (13.27571487, 52.40547562), (13.27509975, 52.40529251),
                    (13.27445793, 52.40513611), (13.27377129, 52.40499115), (13.27301216, 52.40484619),
                    (13.27221012, 52.40473175), (13.27176571, 52.40467834), (13.2713213, 52.40462494),
                    (13.27086258, 52.40459061), (13.27041912, 52.40455627), (13.26996136, 52.40452957),
                    (13.26948929, 52.40451431), (13.26903343, 52.40451431), (13.26856232, 52.40450668),
                    (13.2674017, 52.40453339), (13.26618767, 52.40466309), (13.26518536, 52.40486526),
                    (13.26399708, 52.40516281), (13.26290035, 52.40552139), (13.26176167, 52.40589905),
                    (13.26098156, 52.40613937), (13.26035881, 52.40630722), (13.25974846, 52.40642929),
                    (13.25910568, 52.40649796), (13.25784397, 52.40656281), (13.25656319, 52.40655518),
                    (13.25567818, 52.40652466), (13.25484943, 52.40645218), (13.25416565, 52.40633392),
                    (13.25319576, 52.4061203),
                    (13.25232506, 52.4058342), (13.2498436, 52.40496445), (13.24897575, 52.40818024),
                    (13.24926567, 52.40932083), (13.24891663, 52.41194153), (13.24792576, 52.41547394),
                    (13.24736786, 52.41717911), (13.24579716, 52.42079926), (13.23869896, 52.42063141),
                    (13.22534466, 52.4201355), (13.22228813, 52.42035675), (13.2181263, 52.41918564),
                    (13.21224117, 52.41752625), (13.20514965, 52.41585922), (13.19848061, 52.41557693),
                    (13.19556713, 52.41509628), (13.15934563, 52.40288162), (13.15945053, 52.39967346),
                    (13.15782738, 52.3963623), (13.15860844, 52.39638138), (13.16026402, 52.39652252),
                    (13.16306114, 52.39680481), (13.16594791, 52.39709854), (13.16896439, 52.39736557),
                    (13.17022705, 52.39756393), (13.17092609, 52.39770126), (13.17135715, 52.3977623)]
    }
    array = [tel_aviv, berlin]
    nominated_country = random.randint(0, 1)
    COUNTRY = array[nominated_country]['country']
    coordinaten = array[nominated_country]['polygon']
    poly = Polygon(coordinaten)
    imagery_hits = 0
    path_tosave = "../vue-webapp/public/Image/" + COUNTRY
    if not os.path.exists(path_tosave):
        os.makedirs(path_tosave)
    status = False
    while imagery_hits < 1:
        while status != "OK":
            coord = generate_random(poly)
            lng = coord[0][0]
            lat = coord[0][1]
            locstring = str(lat) + "," + str(lng)
            r = requests.get(API_URL + "?key=" + API_KEY + "&location=" + locstring + "&source=outdoor")
            status = r.json()["status"]
            print(status)
        print("    ========== Got one! ==========")
        outfile = os.path.join(
            path_tosave, IMG_PREFIX + locstring + IMG_SUFFIX)
        url = GOOGLE_URL + "&location=" + locstring
        try:
            urlretrieve(url, outfile)
        except urllib.error.URLError:
            # print("    No imagery")
            break
        imagery_hits += 1
        status = False
        outfile2 = outfile.replace("../vue-webapp/public", ".")
        print(outfile2)
    return outfile2


@api.post("/restart/")
async def explain_api(url):
    url2 = url.replace('.', "../vue-webapp/public", 1)
    os.remove(url2)
    return "Restart"
